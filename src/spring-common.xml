<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
		http://www.springframework.org/schema/beans/spring-beans.xsd">

	<bean id="datasource"
		  class="org.springframework.jdbc.datasource.DriverManagerDataSource">
		<property name="driverClassName" value="com.microsoft.sqlserver.jdbc.SQLServerDriver" />
		<!--注意一下&characterEncoding要修改为&amp;characterEncoding-->
		<property name="url" value="jdbc:sqlserver://localhost:1433;DatabaseName=BlogForTrainee"/>
		<property name="username" value="sa" />
		<property name="password" value="root" />
	</bean>

	<bean id="UserDaoImp"
		  class="org.laboratory.daoImpl.UserDaoImpl">
		<property name="datasource" ref="datasource" />
	</bean>

	<bean id = "MessageDaoImpl" class="org.laboratory.daoImpl.MessageDaoImpl">
		<property name="datasource" ref="datasource"/>
	</bean>

	<bean id="userService" class="org.laboratory.serviceImpl.UserServiceImpl"></bean>

	<bean id="messageService" class="org.laboratory.serviceImpl.MessageServiceImpl"></bean>


	<!-- 文件上传的配置(applicationContext.xml) -->
	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver">
		<!-- 指定所上传文件的总大小不能超过200KB。注意maxUploadSize属性的限制不是针对单个文件，而是所有文件的容量之和 -->
		<property name="maxUploadSize" value="20000000"/>
	</bean>

	<!-- 该异常是SpringMVC在检查上传的文件信息时抛出来的，而且此时还没有进入到Controller方法中 -->
	<bean id="exceptionResovler" class="org.springframework.web.servlet.handler.SimpleMappingExceptionResolver">
		<property name="exceptionMappings" >
			<props>
				<!-- 遇到MaxUploadSizeExceededException异常时，自动跳转到WebContent目录下的error.jsp页面 -->
				<prop key="org.springframework.web.multipart.MaxUploadSizeExceededException">error</prop>
			</props>
		</property>
	</bean>

	<!--<bean id="CSServer" class="org.laboratory.serviceImpl.CSServer"></bean>-->
</beans>
